{% extends 'base.html' %}


{% load bootstrap4 %}


{% block title %}Curso{% endblock %}


{% block styles %}

    <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <style>

        #{{ form.message.auto_id }} {
            display: none;
        }

        .ql-toolbar.ql-snow {
            border-radius: 0.25rem 0.25rem 0 0;
        }

        .ql-container {
            font-size: 1rem;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
        }

        .ql-container.ql-snow {
            border-radius: 0 0 0.25rem 0.25rem;
        }

    </style>

{% endblock styles %}


{% block menu %}
    {% if post.id %}
        <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
                <a href="{% url 'post-delete' classroom.id post.id %}" class="btn btn-outline-danger btn-sm">eliminar</a>
            </li>
        </ul>
    {% endif %}
{% endblock menu %}


{% block header %}

    {% include 'base/header.html' with title='Mensajes' subtitle=classroom.name back_url=classroom.get_post_list_url %}

{% endblock header %}


{% block content %}

    <form class="p-4" method="POST">

        {% csrf_token %}

        {% bootstrap_form form show_label=False %}

        <div id="editor"></div>

        <br>

        <p>
            <button class="btn btn-block btn-success">enviar</button>
            <a href="{{ post.get_detail_url }}" class="btn btn-block btn-outline-secondary">cancelar</a>
        </p>
    </form>


{% endblock content %}


{% block scripts %}

    <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script>

        var editor = new Quill('#editor', {
            theme: 'snow',
            modules: {
                toolbar: [
                    ['bold', 'italic', 'underline'],
                    [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                    [{ 'align': [] }],
                    // ['link', 'image'],
                    ['link'],
                ],
            }
        });

        editor.on('text-change', function(delta, source) {
            $('#{{ form.message.auto_id }}').val($('#editor .ql-editor').html());
        });

    </script>

{% endblock scripts %}
